<Window x:Class="XPuttyMan.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:bltoolswpfctrl="clr-namespace:BLTools.WPF.Controls;assembly=BLTools.WPF.Controls.45"
        xmlns:libputty="clr-namespace:libxputty_std20;assembly=libxputty-std20"
        xmlns:local="clr-namespace:XPuttyMan"
        mc:Ignorable="d"
        Title="XPuttyMan" Height="800" Width="720">

  <Window.Resources>
    <local:MainViewModel x:Key="FakeMainWiewModel" />
    <libputty:TPuttySession x:Key="FakeSession" />
  </Window.Resources>

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto" />
      <RowDefinition Height="*" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <Menu Grid.Row="0"
            Height="23"
            HorizontalAlignment="Stretch"
            Name="mnuMain"
            VerticalAlignment="Top">
      <MenuItem Header="File"
                  Name="mnuFile">
        <MenuItem Name="mnuFileOpen"
                    Header="Open"
                    />
        <MenuItem Name="mnuFileQuit"
                    Header="Quit"
                    Click="MnuFileQuit_Click" />
      </MenuItem>
      <MenuItem Header="View"
                  Name="mnuView">

      </MenuItem>
      <MenuItem Header="Tools"
                  Name="mnuTools">

        <MenuItem Name="mnuToolsOptions"
                    Header="Options">
        </MenuItem>
      </MenuItem>
      <MenuItem Header="Help"
                  Name="mnuHelp">
        <MenuItem Name="mnuHelpContact"
                  Header="Contact"
                  Command="{Binding Path=CommandHelpAboutContact}" />
        <MenuItem Name="mnuHelpAbout"
                  Header="About"
                  Command="{Binding Path=CommandHelpAbout}" />
      </MenuItem>

    </Menu>

    <Grid d:DataContext="{Binding Source={StaticResource FakeMainWiewModel}}">
      <StackPanel Orientation="Vertical">
        <Button Command="{Binding Path=CommandRefreshSessions}" Content="Refresh"/>
        <ListView Grid.Row="1"
                ItemsSource="{Binding Path=ObservableSessions}"
                SelectedItem="{Binding Path=SelectedSession}">
          <ListView.View>
            <GridView >
              <GridViewColumn Header="DisplayName" DisplayMemberBinding="{Binding Path=DisplayName}" Width="400"/>
              <GridViewColumn Header="Host" DisplayMemberBinding="{Binding Path=HostName}" Width="200"/>
              <GridViewColumn Header="Action" Width="100">
                <GridViewColumn.CellTemplate>
                  <DataTemplate>
                    <Button Content="Start" Command="{Binding Path=DataContext.CommandStartSession, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ItemsControl}}}" HorizontalAlignment="Center"/>
                  </DataTemplate>
                </GridViewColumn.CellTemplate>
              </GridViewColumn>
            </GridView>
          </ListView.View>
        </ListView>

        <TextBlock Text="{Binding Path=SelectedSession.DisplayName}"/>
      </StackPanel>
    </Grid>

    <bltoolswpfctrl:ExtendedStatusBar x:Name="stsBar" Grid.Row="2" />
  </Grid>
</Window>
